<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width, initial-scale=1.0">
    <!-- CSS Link -->
    <link rel="stylesheet" href="/style.css">
    
    <!-- Bootstrap Links -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
    crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
    crossorigin="anonymous"></script>
    <title>Schedules Management</title>
</head>
<body id="schedulesbody">
    <%- include('../partials/header') %>
    <br>
    <div class="schedulemanagement">
    <div class="addnewschedules" >
        <form action="/schedules" method="post" class="form-control">
            <h5>Add new schedules</h5>
            <label for="day">Select day</label>
            <select name="day" id="day" class="form-control">
              <option value="Monday">Monday</option>
              <option value="Tuesday">Tuesday</option>
              <option value="Wednesday">Wednesday</option>
              <option value="Thursday">Thursday</option>
              <option value="Friday">Friday</option>
              <option value="Saturday">Saturday</option>
              <option value="Sunday">Sunday</option>
            </select>
            <br>
            <label for="start_at">Start at:</label>
            <select name="start_at" id="start_at" class="form-control">
                <% for(let i=9;i<24; i++){ %>
                    <option value="<%= i %>:00<%= i>11?'pm':'am'%>"><%= i %>:00<%= i>11?'pm':'am'%></option>
                 <% } %>   
                </select>
            <br>
            <label for="end_at">End at:</label>
            <select name="end_at" id="end_at" class="form-control">
                <% for(let i=9;i<24; i++){ %>
                    <option value="<%= i %>:00<%= i>11?'pm':'am'%>"><%= i %>:00<%= i>11?'pm':'am'%></option>
                <% } %>   
                </select>    
            <br>
            <button type="submit" class="btn btn-primary">Add schedule</button>
         </form>
    </div>
     <br>
    <div class="deleteschedules" >
     <form action="/delete" method="post" class="form-control">
        <h5>Delete a schedule</h5>
        <br>
         <input type="text" name="scheduleid" id="scheduleid" placeholder="Enter the schedule id" class="form-control">
         <br>
         <button type="submit" class="btn btn-danger">Delete</button>
     </form>
    </div>
</div>

    <div class="mydiv">
    <h5>My Schedules</h5>   
     <% if(schedules.length==0){ %>
         <p>No schedules for the user</p>
     <% }else{ %>
        <% for(let i=0;i<schedules.length;i++){ %>
            <div class="innerdiv">
                <p>Schedule id: <%= schedules[i].scheduleid %></p>
                <p>User id: <%= schedules[i].userid %></p>
                <p>Day: <%= schedules[i].sday %></p>
                <p>Start At: <%= schedules[i].start_at %></p>
                <p>End At: <%= schedules[i].end_at %></p>
                <!-- <button>Delete</button> -->
            </div>
            <%} %>
        <%} %>
    
    </div>    

    <ul>
        <% if(typeof errors !='undefined'){ %>
            <% errors.forEach(error =>{ %>
                <li><%= error.message %></li>
           <% }) %>   
        <% } %> 
    </ul>
</body>
</html>